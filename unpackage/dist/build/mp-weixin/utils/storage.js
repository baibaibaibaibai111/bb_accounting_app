"use strict";const e=require("../common/vendor.js"),r="accounting_records",t="accounting_categories",n="accounting_budget",o="accounting_balance";exports.clearAllData=function(){try{return e.index.removeStorageSync(r),e.index.removeStorageSync(t),e.index.removeStorageSync(n),!0}catch(o){return console.error("清除数据失败：",o),!1}},exports.getBalance=function(){const r=e.index.getStorageSync(o);return r?JSON.parse(r):{total:0,alipay:0,wechat:0}},exports.getBudget=function(){try{const r=e.index.getStorageSync(n);if(r)return JSON.parse(r)}catch(r){console.error("获取预算失败",r)}return{total:0,categories:{}}},exports.getCategories=function(){try{const r=e.index.getStorageSync(t);if(r){const e=JSON.parse(r);return{income:Array.isArray(e.income)?e.income:[],expense:Array.isArray(e.expense)?e.expense:[]}}}catch(r){console.error("获取分类失败：",r)}return{income:["工资","奖金","兼职","投资"],expense:["餐饮","交通","购物","娱乐","住房","医疗"]}},exports.getRecords=function(){try{const t=e.index.getStorageSync(r);return t?JSON.parse(t):[]}catch(t){return console.error("获取记录失败：",t),[]}},exports.saveBalance=function(r){try{return e.index.setStorageSync(o,JSON.stringify(r)),!0}catch(t){return console.error("保存余额失败：",t),!1}},exports.saveBudget=function(r){try{return r.total=Object.values(r.categories).reduce(((e,r)=>e+Number(r)),0),e.index.setStorageSync(n,JSON.stringify(r)),!0}catch(t){return console.error("保存预算失败",t),!1}},exports.saveCategories=function(r){e.index.setStorageSync(t,JSON.stringify(r))},exports.saveRecords=function(t){try{return e.index.setStorageSync(r,JSON.stringify(t)),!0}catch(n){return console.error("保存记录失败：",n),!1}};
