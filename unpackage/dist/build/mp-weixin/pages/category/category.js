"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/storage.js"),o={data:()=>({incomeCategories:[],expenseCategories:[],isEdit:!1,editIndex:-1,newCategoryType:"expense",newCategoryName:""}),methods:{loadCategories(){const e=t.getCategories();this.incomeCategories=e.income,this.expenseCategories=e.expense},showAddModal(){this.isEdit=!1,this.newCategoryName="",this.$refs.popup.open()},editCategory(e,t){this.isEdit=!0,this.editIndex=t,this.newCategoryType=e,this.newCategoryName="income"===e?this.incomeCategories[t]:this.expenseCategories[t],this.$refs.popup.open()},deleteCategory(t,o){e.index.showModal({title:"提示",content:"确定要删除该分类吗？",success:e=>{e.confirm&&("income"===t?this.incomeCategories.splice(o,1):this.expenseCategories.splice(o,1),this.saveCategories())}})},closePopup(){this.$refs.popup.close()},saveCategory(){this.newCategoryName?(this.isEdit?"income"===this.newCategoryType?this.incomeCategories[this.editIndex]=this.newCategoryName:this.expenseCategories[this.editIndex]=this.newCategoryName:"income"===this.newCategoryType?this.incomeCategories.push(this.newCategoryName):this.expenseCategories.push(this.newCategoryName),this.saveCategories(),this.closePopup(),e.index.showToast({title:"保存成功",icon:"success"})):e.index.showToast({title:"请输入分类名称",icon:"none"})},saveCategories(){t.saveCategories({income:this.incomeCategories,expense:this.expenseCategories})}},onLoad(){this.loadCategories()}};if(!Array){e.resolveComponent("uni-popup")()}Math;const s=e._export_sfc(o,[["render",function(t,o,s,i,a,n){return{a:e.f(a.incomeCategories,((t,o,s)=>({a:e.t(t),b:e.o((e=>n.editCategory("income",o)),o),c:e.o((e=>n.deleteCategory("income",o)),o),d:o}))),b:e.f(a.expenseCategories,((t,o,s)=>({a:e.t(t),b:e.o((e=>n.editCategory("expense",o)),o),c:e.o((e=>n.deleteCategory("expense",o)),o),d:o}))),c:e.o(((...e)=>n.showAddModal&&n.showAddModal(...e))),d:e.t(a.isEdit?"编辑分类":"添加分类"),e:"income"===a.newCategoryType?1:"",f:e.o((e=>a.newCategoryType="income")),g:"expense"===a.newCategoryType?1:"",h:e.o((e=>a.newCategoryType="expense")),i:a.newCategoryName,j:e.o((e=>a.newCategoryName=e.detail.value)),k:e.o(((...e)=>n.closePopup&&n.closePopup(...e))),l:e.o(((...e)=>n.saveCategory&&n.saveCategory(...e))),m:e.sr("popup","26f28a24-0"),n:e.p({type:"center"})}}]]);wx.createPage(s);
